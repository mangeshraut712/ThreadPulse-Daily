import{r as F,a as H,g as q}from"./vendor-DDxydHEc.js";import{r as o,R as K}from"./animation-BXzQqAVY.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var I={exports:{}},N={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G;function Y(){if(G)return N;G=1;var e=F(),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,n=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function h(u,c,v){var l,f={},m=null,g=null;v!==void 0&&(m=""+v),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(g=c.ref);for(l in c)a.call(c,l)&&!i.hasOwnProperty(l)&&(f[l]=c[l]);if(u&&u.defaultProps)for(l in c=u.defaultProps,c)f[l]===void 0&&(f[l]=c[l]);return{$$typeof:s,type:u,key:m,ref:g,props:f,_owner:n.current}}return N.Fragment=r,N.jsx=h,N.jsxs=h,N}var U;function J(){return U||(U=1,I.exports=Y()),I.exports}var t=J(),R={},B;function W(){if(B)return R;B=1;var e=H();return R.createRoot=e.createRoot,R.hydrateRoot=e.hydrateRoot,R}var V=W();const X=q(V),O=6;function Q({gameState:e,onGuessSubmit:s,onHintUnlock:r,onClueSubmit:a,onGameMakerAnimation:n}){const[i,h]=o.useState(""),[u,c]=o.useState(""),[v,l]=o.useState(!1),[f,m]=o.useState(!1),g=o.useRef(null),x=e.playerState.guesses.length,j=Math.max(0,O-x),S=e.playerState.completed,d=j<=0,y=S||d,k=e.communityClues.some(p=>p.author==="local-player"),z=o.useMemo(()=>e.puzzle.hints.slice(0,Math.max(1,Math.min(3,e.playerState.hintsUnlocked))),[e.puzzle.hints,e.playerState.hintsUnlocked]);o.useEffect(()=>{!y&&g.current&&g.current.focus()},[y,x]);const M=o.useCallback(p=>{p.preventDefault();const w=i.trim();if(!w)return;const C=w.toLowerCase().replace(/[^a-z0-9]/g,"");if(e.playerState.guesses.some(L=>L.text.toLowerCase().replace(/[^a-z0-9]/g,"")===C)){l(!0),setTimeout(()=>l(!1),500);return}s(w),h(""),n?.("guess-submit")},[i,e.playerState.guesses,s,n]),A=o.useCallback(p=>{p.preventDefault(),u.trim()&&(a(u.trim()),c(""))},[u,a]),b=o.useCallback(()=>{r(),n?.("hint-reveal")},[r,n]);return t.jsxs("div",{className:"game-board",children:[S&&t.jsxs("div",{className:"completed-banner",children:[t.jsx("div",{className:"completed-banner-icon",children:"üèÜ"}),t.jsxs("div",{className:"completed-banner-text",children:[t.jsx("h3",{children:"Puzzle Solved!"}),t.jsxs("p",{children:["The answer was ",t.jsxs("strong",{children:['"',e.puzzle.answer,'"']})," ‚Äî you got it in ",x," ",x===1?"guess":"guesses","."]})]})]}),d&&!S&&t.jsxs("div",{className:"failed-banner",children:[t.jsx("div",{className:"failed-banner-icon",children:"üí°"}),t.jsxs("div",{className:"failed-banner-text",children:[t.jsx("h3",{children:"Not This Time"}),t.jsxs("p",{children:["The answer was ",t.jsxs("strong",{children:['"',e.puzzle.answer,'"']}),". Come back tomorrow for a new puzzle!"]})]})]}),t.jsxs("div",{className:"card puzzle-card",children:[t.jsxs("div",{className:"card-header",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"puzzle-number",children:["Puzzle #",e.puzzle.id.replace("p","")," ¬∑ ",e.dayKey]}),t.jsx("h2",{className:"puzzle-title",children:e.puzzle.title})]}),t.jsx("span",{className:"card-badge badge-category",children:e.puzzle.category})]}),t.jsx("ul",{className:"hints-list",children:e.puzzle.hints.map((p,w)=>{const C=w<z.length;return t.jsxs("li",{className:`hint-item ${C?"":"hint-locked"}`,onClick:!C&&!y?b:void 0,role:C?void 0:"button",tabIndex:!C&&!y?0:void 0,"aria-label":C?void 0:`Unlock hint ${w+1}`,children:[t.jsx("span",{className:"hint-number",children:w+1}),t.jsx("span",{className:"hint-text",children:C?p:"Tap to unlock this hint"})]},`hint-${w}`)})}),t.jsx("div",{className:"subreddit-tags",children:e.puzzle.subredditTags.map(p=>t.jsx("span",{className:"subreddit-tag",children:p},p))})]}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",children:[t.jsx("h3",{className:"card-title",children:"Your Guesses"}),t.jsx("div",{className:"guess-slots","aria-label":`${j} guesses remaining`,children:Array.from({length:O},(p,w)=>{const C=e.playerState.guesses[w];let E="guess-slot";return C&&(E+=C.correct?" correct":" used"),t.jsx("div",{className:E},w)})})]}),e.playerState.guesses.length>0&&t.jsx("div",{className:"guess-grid",children:e.playerState.guesses.map((p,w)=>t.jsxs("div",{className:`guess-row ${p.correct?"correct":"incorrect"}`,style:{animationDelay:`${w*80}ms`},children:[t.jsx("span",{className:"guess-icon",children:p.correct?"‚úÖ":"‚ùå"}),t.jsx("span",{children:p.text})]},`guess-${w}`))}),!y&&t.jsxs("form",{onSubmit:M,className:"input-group",children:[t.jsx("input",{ref:g,type:"text",className:`guess-input ${v?"gm-error":""}`,value:i,onChange:p=>h(p.target.value),placeholder:`Guess the word... (${j} left)`,maxLength:32,autoComplete:"off",autoCapitalize:"off",spellCheck:!1,disabled:y,id:"guess-input"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!i.trim()||y,children:"Submit"})]}),e.playerState.score>0&&t.jsx("div",{style:{marginTop:"var(--sp-4)",display:"flex",alignItems:"center",gap:"var(--sp-3)"},children:t.jsxs("div",{children:[t.jsx("div",{className:"score-label",children:"Score"}),t.jsx("div",{className:"score-value",children:e.playerState.score})]})})]}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",children:[t.jsx("h3",{className:"card-title",children:"üí¨ Community Clues"}),t.jsxs("span",{className:"card-badge badge-category",children:[e.communityClues.length," clue",e.communityClues.length!==1?"s":""]})]}),e.communityClues.length>0?t.jsx("ul",{className:"clue-list",children:e.communityClues.map(p=>t.jsxs("li",{className:"clue-item",children:[t.jsxs("div",{className:"clue-votes",children:[t.jsx("button",{className:"clue-vote-btn","aria-label":"Upvote",type:"button",children:"‚ñ≤"}),t.jsx("span",{className:"clue-vote-count",children:p.upvotes}),t.jsx("button",{className:"clue-vote-btn","aria-label":"Downvote",type:"button",children:"‚ñº"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"clue-text",children:p.text}),t.jsxs("div",{className:"clue-author",children:["by ",p.author==="local-player"?"you":p.author]})]})]},p.id))}):t.jsx("p",{style:{color:"var(--text-tertiary)",fontSize:"var(--text-sm)"},children:"No clues yet ‚Äî be the first to contribute!"}),k?t.jsx("div",{className:"success-toast",style:{marginTop:"var(--sp-3)"},children:"‚úÖ Your clue has been submitted. Thanks for contributing!"}):t.jsx(t.Fragment,{children:f?t.jsxs("form",{onSubmit:A,className:"input-group",style:{marginTop:"var(--sp-4)"},children:[t.jsx("input",{type:"text",className:"guess-input",value:u,onChange:p=>c(p.target.value),placeholder:"Write a helpful clue (8-180 chars)",maxLength:180,minLength:8,id:"clue-input"}),t.jsx("button",{type:"submit",className:"btn btn-secondary",disabled:u.trim().length<8,children:"Submit"})]}):t.jsx("button",{type:"button",className:"btn btn-outline",style:{marginTop:"var(--sp-4)",width:"100%"},onClick:()=>m(!0),children:"‚úçÔ∏è Contribute a Clue"})})]})]})}const _=["#FF4500","#0079D3","#FFB800","#46D369","#7B61FF","#FF6ACB","#0DD3BB"];function Z({active:e}){const[s,r]=o.useState([]);return o.useEffect(()=>{if(!e){r([]);return}const a=Array.from({length:50},(i,h)=>({id:h,x:Math.random()*100,color:_[Math.floor(Math.random()*_.length)],delay:Math.random()*.6,duration:1.5+Math.random()*2,size:6+Math.random()*8,shape:Math.random()>.5?"square":"circle"}));r(a);const n=setTimeout(()=>r([]),4e3);return()=>clearTimeout(n)},[e]),s.length===0?null:t.jsx("div",{className:"confetti-container","aria-hidden":"true",children:s.map(a=>t.jsx("div",{className:"confetti-piece",style:{left:`${a.x}%`,width:a.size,height:a.size,backgroundColor:a.color,borderRadius:a.shape==="circle"?"50%":"2px",animationDelay:`${a.delay}s`,animationDuration:`${a.duration}s`}},a.id))})}function ee({gameState:e,onClose:s,onShare:r}){const a=e.playerState.completed,n=e.playerState.guesses.length,i=e.playerState.score,h=e.playerState.streak,u=e.playerState.guesses.map(m=>m.correct?"üü©":"üü•").join(""),c=a?`üß© ThreadPulse Daily ${e.dayKey}

${u}

Score: ${i} | Streak: üî•${h}

#ThreadPulseDaily #RedditGames`:`üß© ThreadPulse Daily ${e.dayKey}

${u}

Better luck tomorrow!

#ThreadPulseDaily #RedditGames`,v=async()=>{try{await navigator.clipboard.writeText(c),r("clipboard")}catch{const m=document.createElement("textarea");m.value=c,document.body.appendChild(m),m.select(),document.execCommand("copy"),document.body.removeChild(m),r("clipboard")}},l=()=>{const m=`https://www.reddit.com/submit?title=${encodeURIComponent(`ThreadPulse Daily ${e.dayKey} ‚Äî Score: ${i}`)}&selftext=true&text=${encodeURIComponent(c)}`;window.open(m,"_blank","width=600,height=500"),r("reddit")},f=()=>{const m=`https://twitter.com/intent/tweet?text=${encodeURIComponent(c)}`;window.open(m,"_blank","width=600,height=400"),r("twitter")};return t.jsx("div",{className:"modal-overlay",onClick:s,role:"dialog","aria-modal":"true","aria-label":"Game Results",children:t.jsxs("div",{className:"modal-card",onClick:m=>m.stopPropagation(),children:[t.jsx("div",{className:"result-emoji",children:a?"üéâ":"üòî"}),t.jsx("h2",{className:"result-title",children:a?"Brilliant!":"Better Luck Tomorrow"}),t.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"var(--text-sm)",marginBottom:"var(--sp-2)"},children:a?`You solved it in ${n} ${n===1?"guess":"guesses"}!`:`The answer was "${e.puzzle.answer}"`}),t.jsx("div",{style:{fontSize:"1.5rem",letterSpacing:"4px",margin:"var(--sp-4) 0"},children:u}),t.jsxs("div",{className:"result-stats",children:[t.jsxs("div",{className:"result-stat",children:[t.jsx("div",{className:"result-stat-value",style:{color:a?"var(--success)":"var(--error)"},children:i}),t.jsx("div",{className:"result-stat-label",children:"Score"})]}),t.jsxs("div",{className:"result-stat",children:[t.jsxs("div",{className:"result-stat-value",style:{color:"var(--accent-gold)"},children:["üî•",h]}),t.jsx("div",{className:"result-stat-label",children:"Streak"})]}),t.jsxs("div",{className:"result-stat",children:[t.jsxs("div",{className:"result-stat-value",children:[n,"/6"]}),t.jsx("div",{className:"result-stat-label",children:"Guesses"})]})]}),t.jsxs("div",{className:"share-grid",children:[t.jsx("button",{className:"share-btn share-btn-reddit",onClick:l,type:"button",children:"ü§ñ Share on Reddit"}),t.jsx("button",{className:"share-btn share-btn-copy",onClick:v,type:"button",children:"üìã Copy Result"}),t.jsx("button",{className:"share-btn share-btn-twitter",onClick:f,type:"button",children:"üê¶ Share on X"})]}),t.jsx("button",{className:"btn btn-ghost",onClick:s,style:{marginTop:"var(--sp-4)",width:"100%"},type:"button",children:"Close"})]})})}const te=[{id:"p001",answer:"wholesome",category:"community-vibe",title:"Faith in Humans",hints:["This post type usually gets people saying, 'I needed this today.'","It often features strangers helping each other with no strings attached.","Common in communities focused on kindness and uplifting stories."],subredditTags:["r/HumansBeingBros","r/wholesomememes"]},{id:"p002",answer:"nostalgia",category:"memory",title:"Back in the Day",hints:["This feeling spikes when people post old gadgets, cartoons, or school memories.","Comments often include phrases like 'core memory unlocked.'","It connects current users to past eras and shared cultural moments."],subredditTags:["r/nostalgia","r/OldSchoolCool"]},{id:"p003",answer:"chaos",category:"thread-energy",title:"Comment Spiral",hints:["The top comment is normal, then everything derails quickly.","Usually paired with absurd memes, bad puns, and escalating jokes.","The mood is high-energy and unpredictable."],subredditTags:["r/memes","r/funny"]},{id:"p004",answer:"plottwist",category:"story",title:"Not What You Expected",hints:["A post starts one way, then reveals a very different outcome.","Readers often edit their comments after seeing new context.","This is a classic pattern in storytelling and viral threads."],subredditTags:["r/tifu","r/BestofRedditorUpdates"]},{id:"p005",answer:"debate",category:"discussion",title:"Hot Take Hour",hints:["People split into camps and defend opinions with long replies.","Most threads have strong arguments from both sides.","Moderation and civility matter most in this format."],subredditTags:["r/changemyview","r/AskReddit"]},{id:"p006",answer:"speedrun",category:"gaming",title:"Fastest Route",hints:["The objective is to finish as quickly as possible under shared rules.","Players optimize every second and discover tiny time saves.","Communities post records, resets, and breakdown clips."],subredditTags:["r/speedrun","r/gaming"]},{id:"p007",answer:"underrated",category:"recommendation",title:"Hidden Gem",hints:["Users argue this item deserves much more attention.","The thread usually includes reasons it was overlooked.","A lot of replies become recommendation chains."],subredditTags:["r/movies","r/Music"]},{id:"p008",answer:"cringe",category:"reaction",title:"Second-Hand Embarrassment",hints:["People react strongly when social mistakes are visible to everyone.","Commenters physically recoil while still watching to the end.","The emotion mixes discomfort, humor, and disbelief."],subredditTags:["r/CringePurgatory","r/PublicFreakout"]},{id:"p009",answer:"whodunit",category:"mystery",title:"Solve the Case",hints:["The thread presents clues and asks readers to infer the culprit.","People compare evidence and challenge each theory.","This format rewards close reading and lateral thinking."],subredditTags:["r/UnresolvedMysteries","r/RBI"]},{id:"p010",answer:"streak",category:"habit",title:"Keep It Going",hints:["Players return daily to maintain progress without missing a day.","The mechanic is simple but drives long-term engagement.","A miss resets momentum, so consistency matters."],subredditTags:["r/theXeffect","r/GetDisciplined"]},{id:"p011",answer:"repost",category:"meta",title:"D√©j√† Vu Scroll",hints:["Users in the comments section start debating originality.","You feel certain you've seen this exact content before.","The most common accusation in any popular thread."],subredditTags:["r/memes","r/funny"]},{id:"p012",answer:"karma",category:"reddit-culture",title:"Internet Points",hints:["It's the currency that fuels participation but can't buy anything.","Some users farm it obsessively with low-effort posts.","Your total is visible on your profile and signals reputation."],subredditTags:["r/help","r/TheoryOfReddit"]},{id:"p013",answer:"rickroll",category:"internet-culture",title:"Never Gonna Give You Up",hints:["A harmless prank that's been going strong since the 2000s.","You click a link expecting something else entirely.","The song is catchy. The betrayal is legendary."],subredditTags:["r/rickroll","r/memes"]},{id:"p014",answer:"moderation",category:"governance",title:"Guardians of the Thread",hints:["Without this, subreddits would descend into spam and toxicity.","Volunteers enforce rules, remove posts, and ban violators.","Every community depends on this unpaid labor."],subredditTags:["r/modhelp","r/subredditdrama"]},{id:"p015",answer:"copypasta",category:"humor",title:"Ctrl+V Comedy",hints:["Long blocks of text that spread through repetition and absurdity.","The original meaning is lost ‚Äî now it's pure meme fuel.","Navy Seal, gorilla warfare, and tendies are classic examples."],subredditTags:["r/copypasta","r/shitposting"]},{id:"p016",answer:"throwaway",category:"confession",title:"Anonymous Account",hints:["Created specifically so the main account stays clean.","Often used to share deeply personal or embarrassing stories.","The username usually starts with a telltale phrase."],subredditTags:["r/confessions","r/relationship_advice"]},{id:"p017",answer:"lurker",category:"behavior",title:"Silent Observer",hints:["They read every comment but never post or reply.","Statistically, this describes the vast majority of users.","Some eventually 'de-cloak' with an apologetic first comment."],subredditTags:["r/AskReddit","r/memes"]},{id:"p018",answer:"crosspost",category:"mechanics",title:"Shared Across Borders",hints:["Content from one community appears in another with attribution.","It's an official feature that gives credit to the original poster.","Useful when a post fits multiple subreddits equally well."],subredditTags:["r/help","r/TheoryOfReddit"]},{id:"p019",answer:"banana",category:"inside-joke",title:"Universal Scale",hints:["Redditors use this item to show real-world size of objects.","It started as a joke and became an unwritten standard.","No ruler needed when you have this fruit for comparison."],subredditTags:["r/mildlyinteresting","r/BananasForScale"]},{id:"p020",answer:"hivemind",category:"phenomenon",title:"Collective Agreement",hints:["When the majority opinion dominates and dissent gets buried.","Upvotes create a feedback loop that reinforces popular views.","Critics say it suppresses original thought in large subreddits."],subredditTags:["r/TheoryOfReddit","r/unpopularopinion"]},{id:"p021",answer:"flair",category:"customization",title:"Badge of Identity",hints:["A small label next to your username that shows team or role.","Some subreddits require it before you can post.","It can be text, an emoji, or both ‚Äî depending on community rules."],subredditTags:["r/help","r/nfl"]},{id:"p022",answer:"tifu",category:"storytelling",title:"Mistake Made Public",hints:["Four letters that preface the most entertaining confessions.","Stories range from minor embarrassment to life-altering blunders.","Half the fun is reading comments that say 'this isn't that bad.'"],subredditTags:["r/tifu","r/AskReddit"]},{id:"p023",answer:"upvote",category:"mechanics",title:"Arrow of Approval",hints:["One click to show agreement, appreciation, or 'this is funny.'","The direction is always skyward ‚Äî toward visibility.","Enough of these and a post reaches the front page."],subredditTags:["r/help","r/TheoryOfReddit"]},{id:"p024",answer:"rabbit hole",category:"experience",title:"Time Vanished",hints:["You clicked on one link, then another, and suddenly it's 3 AM.","Wikipedia, Reddit threads, and YouTube all enable this behavior.","The deeper you go, the further from the original topic you drift."],subredditTags:["r/InternetIsBeautiful","r/wikipedia"]},{id:"p025",answer:"goldfish",category:"pets",title:"Bowl Buddy",hints:["A common first pet that lives in a small glass container.","Despite myths, they can actually remember things for months.","Posts about these creatures often reveal surprisingly long lifespans."],subredditTags:["r/Aquariums","r/pets"]},{id:"p026",answer:"meme",category:"culture",title:"Shared Language",hints:["An image, video, or phrase that spreads rapidly across the internet.","The best ones capture a universal feeling in a single frame.","They evolve, get remixed, and eventually die ‚Äî only to be reborn."],subredditTags:["r/memes","r/dankmemes"]},{id:"p027",answer:"subreddit",category:"structure",title:"Community Within a Community",hints:["Every topic, hobby, and niche has its own dedicated space.","Prefixed with 'r/' and managed by volunteer moderators.","There are millions of these, from r/cats to r/astrophysics."],subredditTags:["r/help","r/findareddit"]},{id:"p028",answer:"frontpage",category:"achievement",title:"Peak Visibility",hints:["Getting here means thousands or millions will see your content.","It's the ultimate validation for a Reddit post.","An algorithm decides what rises to this coveted spot."],subredditTags:["r/all","r/popular"]},{id:"p029",answer:"cakeday",category:"tradition",title:"Anniversary Slice",hints:["A small icon appears next to your name on this special day.","It celebrates the date your account was created.","Posts mentioning it often receive extra goodwill and upvotes."],subredditTags:["r/cakeday","r/memes"]},{id:"p030",answer:"shitpost",category:"humor",title:"Low Effort, High Impact",hints:["Created with minimal effort but maximum comedic absurdity.","Quality is intentionally low ‚Äî that's the entire point.","Some communities are dedicated exclusively to this art form."],subredditTags:["r/shitposting","r/okbuddyretard"]},{id:"p031",answer:"deepfake",category:"technology",title:"Seeing Isn't Believing",hints:["AI-generated media that makes anyone say or do anything.","The realism has improved so much that detection is difficult.","Ethical concerns around consent and misinformation are huge."],subredditTags:["r/technology","r/Futurology"]},{id:"p032",answer:"gilded",category:"reward",title:"Golden Recognition",hints:["When someone spends real money to highlight your contribution.","A shiny icon appears next to the post or comment.","The recipient gets special perks and access to an exclusive lounge."],subredditTags:["r/help","r/lounge"]},{id:"p033",answer:"satire",category:"writing",title:"Serious About Not Being Serious",hints:["It looks real, reads real, but the intention is mockery.","The best versions make you question if the author is joking.","Subreddits dedicated to this often get mistaken for genuine belief."],subredditTags:["r/TheOnion","r/nottheonion"]},{id:"p034",answer:"bot",category:"automation",title:"Not a Real Person",hints:["It replies instantly with formatted information or a reminder.","Some are helpful, some are annoying, some are malicious.","Auto-moderator is the most well-known example on this platform."],subredditTags:["r/BotDefense","r/SubSimulatorGPT2"]},{id:"p035",answer:"ama",category:"format",title:"Open Questions",hints:["Three letters that invite the internet to interrogate you.","Celebrities, scientists, and everyday people have done them.","The most famous one involved a sitting U.S. president."],subredditTags:["r/AMA","r/IAmA"]}],se=["http://","https://","discord.gg","t.me/"];function re(e=new Date){const s=new Date(e),r=s.getUTCFullYear(),a=String(s.getUTCMonth()+1).padStart(2,"0"),n=String(s.getUTCDate()).padStart(2,"0");return`${r}-${a}-${n}`}function ae(e){let s=2166136261;for(let r=0;r<e.length;r+=1)s^=e.charCodeAt(r),s=Math.imul(s,16777619);return s>>>0}function ne(e){let s=e>>>0;return()=>{s+=1831565813;let r=Math.imul(s^s>>>15,s|1);return r^=r+Math.imul(r^r>>>7,r|61),((r^r>>>14)>>>0)/4294967296}}function D(e=""){return e.toLowerCase().replace(/[^a-z0-9]/g,"").trim()}function ie(e=new Date,s=te){if(!Array.isArray(s)||s.length===0)throw new Error("Puzzle bank cannot be empty.");const r=re(e),a=ae(r),n=ne(a),i=Math.floor(n()*s.length),h=s[i];return{dayKey:r,seed:a,index:i,puzzle:h}}function oe({guess:e,answer:s}){const r=D(e),a=D(s);return{normalizedGuess:r,normalizedAnswer:a,correct:r.length>0&&r===a}}function le({correct:e,hintsUsed:s,timeSeconds:r,streakDays:a}){if(!e)return 0;const n=100,i=Math.max(0,s-1)*15,h=Math.min(35,Math.floor(Math.max(0,r)/6)),u=Math.min(25,Math.floor(Math.max(0,a)/2));return Math.max(5,n-i-h+u)}function P(e,s={}){const r=String(e||"").trim();if(r.length<8)return{valid:!1,reason:"Clue must be at least 8 characters."};if(r.length>180)return{valid:!1,reason:"Clue must be 180 characters or fewer."};const a=r.toLowerCase();for(const c of se)if(a.includes(c))return{valid:!1,reason:"Links are not allowed in clues."};const n=Array.isArray(s.forbiddenWords)?s.forbiddenWords:[],i=D(r);for(const c of n){const v=D(c);if(v&&i.includes(v))return{valid:!1,reason:"Clue cannot contain the answer."}}return(Array.isArray(s.existingClues)?s.existingClues:[]).some(c=>D(c)===i)?{valid:!1,reason:"This clue already exists for today."}:{valid:!0,reason:"ok"}}function ce(e,s=5){return Array.isArray(e)?[...e].filter(r=>r&&typeof r.text=="string").filter(r=>P(r.text).valid).sort((r,a)=>{const n=(r.upvotes||0)+(r.modBoost||0)*3,i=(a.upvotes||0)+(a.modBoost||0)*3;if(n!==i)return i-n;const h=r.createdAt instanceof Date?r.createdAt.getTime():0;return(a.createdAt instanceof Date?a.createdAt.getTime():0)-h}).slice(0,s):[]}const T={streak:"threadpulse.streak",clues:"threadpulse.cluesByDay"},$=6;function de(){return{guesses:[],hintsUnlocked:1,score:0,completed:!1,timeStarted:new Date,streak:0}}function ue(e){const s=new Date;return{id:String(e.id),title:String(e.title),answer:String(e.answer),category:String(e.category),hints:Array.isArray(e.hints)?e.hints.map(r=>String(r)):[],subredditTags:Array.isArray(e.subredditTags)?e.subredditTags.map(r=>String(r)):[],difficulty:.5,createdAt:s}}function he(){try{const e=localStorage.getItem(T.streak);if(!e)return 0;const s=JSON.parse(e);return Number(s.streakDays||0)}catch{return 0}}function me(){try{const e=localStorage.getItem(T.streak);if(!e)return{lastSolvedDay:null,streakDays:0};const s=JSON.parse(e);return{lastSolvedDay:typeof s.lastSolvedDay=="string"?s.lastSolvedDay:null,streakDays:Number(s.streakDays||0)}}catch{return{lastSolvedDay:null,streakDays:0}}}function pe(e=new Date){const s=new Date(e),r=s.getUTCFullYear(),a=String(s.getUTCMonth()+1).padStart(2,"0"),n=String(s.getUTCDate()).padStart(2,"0");return`${r}-${a}-${n}`}function ye(e,s){const r=new Date(`${e}T00:00:00Z`);return r.setUTCDate(r.getUTCDate()+s),pe(r)}function ge(e){const s=me();if(s.lastSolvedDay===e)return s.streakDays;const r=ye(e,-1),a={lastSolvedDay:e,streakDays:s.lastSolvedDay===r?s.streakDays+1:1};try{localStorage.setItem(T.streak,JSON.stringify(a))}catch{}return a.streakDays}function fe(e){try{const s=localStorage.getItem(T.clues);if(!s)return[];const a=JSON.parse(s)?.[e];return Array.isArray(a)?a:[]}catch{return[]}}function be(e,s){try{const r=localStorage.getItem(T.clues),a=r?JSON.parse(r):{};a[e]=s,localStorage.setItem(T.clues,JSON.stringify(a))}catch{}}function ve(){const[e,s]=o.useState(null),[r,a]=o.useState(!1),[n,i]=o.useState(null),h=o.useCallback(async()=>{a(!0),i(null);try{const l=ie(new Date),f={dayKey:String(l.dayKey),puzzle:ue(l.puzzle),playerState:{...de(),streak:he()},communityClues:fe(String(l.dayKey)),leaderboard:[],timestamp:new Date};s(f)}catch(l){i(l instanceof Error?l.message:"Failed to initialize daily game.")}finally{a(!1)}},[]),u=o.useCallback(async l=>{if(!e||e.playerState.completed)return!1;if(e.playerState.guesses.length>=$)return i("No guesses remaining for today."),!1;const f=l.toLowerCase().replace(/[^a-z0-9]/g,"").trim();if(e.playerState.guesses.some(k=>k.text.toLowerCase().replace(/[^a-z0-9]/g,"").trim()===f))return i("You already tried that guess."),!1;const g=oe({guess:l,answer:e.puzzle.answer}),x=new Date(e.playerState.timeStarted),j=Number.isNaN(x.getTime())?0:Math.max(1,Math.round((Date.now()-x.getTime())/1e3)),S=le({correct:g.correct,hintsUsed:e.playerState.hintsUnlocked,timeSeconds:j,streakDays:e.playerState.streak}),d={text:l,timestamp:new Date,hintsUsed:e.playerState.hintsUnlocked,correct:g.correct},y=g.correct?ge(e.dayKey):e.playerState.streak;return s({...e,playerState:{...e.playerState,guesses:[...e.playerState.guesses,d],completed:g.correct,score:S,streak:y,timeCompleted:g.correct?new Date:e.playerState.timeCompleted}}),g.correct?i(null):e.playerState.guesses.length+1>=$?i("Round complete. Try again on the next daily puzzle."):i(`Not correct yet. ${$-(e.playerState.guesses.length+1)} guesses left.`),g.correct},[e]),c=o.useCallback(async()=>{if(!e||e.playerState.completed)return;const l=Math.min(3,e.playerState.hintsUnlocked+1);l!==e.playerState.hintsUnlocked&&s({...e,playerState:{...e.playerState,hintsUnlocked:l}})},[e]),v=o.useCallback(async l=>{if(!e)return!1;if(e.communityClues.some(x=>x.author==="local-player"))return i("You already submitted a clue for today."),!1;const f=P(l,{forbiddenWords:[e.puzzle.answer],existingClues:e.communityClues.map(x=>x.text)});if(!f.valid)return i(f.reason||"Invalid clue."),!1;const m={id:`${Date.now()}-${Math.floor(Math.random()*1e4)}`,text:l.trim(),author:"local-player",upvotes:1,modBoost:0,aiAnalysis:{sentiment:0,creativity:.5,difficulty:.5,engagement_prediction:.5,toxicity_score:0,quality_score:.5},approved:!0,createdAt:new Date},g=ce([...e.communityClues,m],5);return be(e.dayKey,g),s({...e,communityClues:g}),i(null),!0},[e]);return{currentGame:e,isLoading:r,error:n,refreshGame:h,submitGuess:u,unlockHint:c,submitClue:v}}function xe(){const[e,s]=o.useState(!1),[r,a]=o.useState({quality:"high",soundEnabled:!0,particleEffects:!0,reducedMotion:!1}),[n,i]=o.useState(new Set),h=o.useCallback(async()=>{try{s(!0)}catch{console.warn("GameMaker initialization failed, using fallback animations"),s(!0)}},[]),u=o.useCallback(d=>{typeof window>"u"||r.reducedMotion||(i(y=>{const k=new Set(y);return k.add(d),k}),setTimeout(()=>{i(y=>{const k=new Set(y);return k.delete(d),k})},c(d)))},[r.reducedMotion]),c=d=>({celebration:2e3,success:1e3,error:500,"hint-reveal":300,"guess-submit":400,"clue-contribute":500,"puzzle-solve":1500})[d]||500,v=o.useCallback((d,y)=>{!r.particleEffects||r.reducedMotion},[r.particleEffects,r.reducedMotion]),l=o.useCallback(d=>{r.soundEnabled&&console.log(`[Sound] ${d}`)},[r.soundEnabled]),f=o.useCallback(d=>{a(y=>({...y,quality:d}))},[]),m=o.useCallback(()=>{a(d=>({...d,soundEnabled:!d.soundEnabled}))},[]),g=o.useCallback(()=>{a(d=>({...d,particleEffects:!d.particleEffects}))},[]),x=o.useCallback(d=>{a(y=>({...y,reducedMotion:d}))},[]),j=o.useCallback(async()=>null,[]),S=o.useCallback(d=>({celebration:"gm-celebration",success:"gm-success",error:"gm-error","hint-reveal":"gm-hint-reveal","guess-submit":"gm-guess-submit","clue-contribute":"gm-clue-contribute","puzzle-solve":"gm-puzzle-solve"})[d]||"",[]);return o.useMemo(()=>({isReady:e,initialize:h,triggerAnimation:u,createParticles:v,playSound:l,updateQuality:f,toggleSound:m,toggleParticles:g,setReducedMotion:x,captureScreenshot:j,config:r,activeAnimations:n,getAnimationClass:S}),[e,h,u,v,l,f,m,g,x,j,r,n,S])}const we=()=>{const e=o.useCallback(()=>"vibrate"in navigator,[]),s=o.useCallback(n=>{if(!e())return;const i={light:[10],medium:[50],heavy:[100],success:[50,50,50],error:[100,50,100],warning:[50,30,50]};try{navigator.vibrate(i[n])}catch(h){console.error("Haptic feedback failed:",h)}},[e]),r=o.useCallback(n=>{if(e())try{navigator.vibrate(n)}catch(i){console.error("Custom haptic pattern failed:",i)}},[e]),a=o.useCallback(()=>{if(e())try{navigator.vibrate(0)}catch(n){console.error("Failed to stop haptic:",n)}},[e]);return{isSupported:e(),triggerHaptic:s,triggerCustomPattern:r,stop:a}};class Se{constructor(){this.handlers=new Map,this.isDevvit=window.parent!==window,this.isDevvit&&window.addEventListener("message",s=>{try{const r=typeof s.data=="string"?JSON.parse(s.data):s.data;r?.type&&this.emit(r.type,r)}catch{}})}postMessage(s,r){if(!this.isDevvit){console.log("[DevvitBridge] (local mode) ‚Üí",s,r);return}window.parent.postMessage({type:"devvit-message",data:{message:{type:s,data:r}}},"*")}on(s,r){this.handlers.has(s)||this.handlers.set(s,[]),this.handlers.get(s).push(r)}off(s,r){const a=this.handlers.get(s);a&&this.handlers.set(s,a.filter(n=>n!==r))}emit(s,r){const a=this.handlers.get(s);a&&a.forEach(n=>n(r))}get isInsideReddit(){return this.isDevvit}reportGameComplete(s,r,a){const n=new Date().toISOString().split("T")[0];this.postMessage("GAME_COMPLETE",{score:s,guesses:r,streak:a,dayKey:n})}submitClue(s){const r=new Date().toISOString().split("T")[0];this.postMessage("SUBMIT_CLUE",{clueText:s,dayKey:r})}requestLeaderboard(){const s=new Date().toISOString().split("T")[0];this.postMessage("GET_LEADERBOARD",{dayKey:s})}}const ke=new Se;function Ce(){const{currentGame:e,isLoading:s,error:r,refreshGame:a,submitGuess:n,unlockHint:i,submitClue:h}=ve(),u=xe(),c=we(),[v,l]=o.useState(!1),[f,m]=o.useState(!1),[g,x]=o.useState(0),[j,S]=o.useState(!1),d=o.useRef(null),y=o.useRef(!1);o.useEffect(()=>{a(),u.initialize()},[a,u.initialize]),o.useEffect(()=>{if(!s&&e){const b=document.getElementById("loading-screen");b&&(b.style.opacity="0",setTimeout(()=>{b.style.display="none"},400))}},[s,e]),o.useEffect(()=>(e&&!e.playerState.completed&&e.playerState.guesses.length<6&&(d.current=setInterval(()=>{x(b=>b+1)},1e3)),()=>{d.current&&clearInterval(d.current)}),[e]),o.useEffect(()=>{e?.playerState.completed&&!y.current&&(y.current=!0,l(!0),d.current&&clearInterval(d.current),c.triggerHaptic("success"),u.triggerAnimation("celebration"),ke.reportGameComplete(e.playerState.score??0,e.playerState.guesses.length,e.playerState.streak??0),setTimeout(()=>m(!0),1200)),e&&!e.playerState.completed&&e.playerState.guesses.length>=6&&!y.current&&(y.current=!0,d.current&&clearInterval(d.current),c.triggerHaptic("error"),u.triggerAnimation("error"),setTimeout(()=>m(!0),800))},[e,c,u]);const k=o.useCallback(async b=>{await n(b)?c.triggerHaptic("success"):c.triggerHaptic("medium")},[n,c]),z=o.useCallback(b=>{u.triggerAnimation(b)},[u]),M=o.useCallback(b=>{b==="clipboard"&&(S(!0),setTimeout(()=>S(!1),2e3))},[]),A=b=>{const p=Math.floor(b/60),w=b%60;return`${p}:${w.toString().padStart(2,"0")}`};return s||!e?t.jsxs("div",{className:"app-shell",children:[t.jsx("div",{className:"app-bg"}),t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",flexDirection:"column",gap:"var(--sp-4)"},children:[t.jsx("div",{className:"loading-spinner"}),t.jsx("p",{style:{color:"var(--text-tertiary)",fontSize:"var(--text-sm)"},children:"Loading today's puzzle..."})]})]}):t.jsxs("div",{className:"app-shell",children:[t.jsx("div",{className:"app-bg"}),t.jsx(Z,{active:v}),t.jsx("header",{className:"app-header",children:t.jsxs("div",{className:"header-inner",children:[t.jsxs("div",{className:"header-brand",children:[t.jsx("div",{className:"brand-icon","aria-hidden":"true",children:"üß©"}),t.jsxs("div",{className:"brand-text",children:[t.jsx("h1",{children:"ThreadPulse Daily"}),t.jsx("p",{children:e.dayKey})]})]}),t.jsxs("div",{className:"header-meta",children:[!e.playerState.completed&&e.playerState.guesses.length<6&&t.jsxs("div",{className:"timer","aria-label":`Time elapsed: ${A(g)}`,children:[t.jsx("span",{className:"timer-icon",children:"‚è±"}),t.jsx("span",{children:A(g)})]}),e.playerState.streak>0&&t.jsxs("div",{className:"streak-badge","aria-label":`${e.playerState.streak} day streak`,children:["üî• ",e.playerState.streak]})]})]})}),t.jsxs("main",{className:"app-main",children:[r&&t.jsxs("div",{className:"error-toast",role:"alert",children:[t.jsx("span",{children:"‚ö†Ô∏è"}),t.jsx("span",{children:r})]}),j&&t.jsxs("div",{className:"success-toast",role:"status",children:[t.jsx("span",{children:"‚úÖ"}),t.jsx("span",{children:"Result copied to clipboard!"})]}),t.jsx(Q,{gameState:e,onGuessSubmit:b=>void k(b),onHintUnlock:()=>void i(),onClueSubmit:b=>void h(b),onGameMakerAnimation:z})]}),t.jsxs("footer",{className:"app-footer",children:[t.jsxs("p",{children:["Made with ‚ù§Ô∏è for the ",t.jsx("strong",{children:"Reddit Daily Games Hackathon 2026"})]}),t.jsxs("div",{className:"footer-links",children:[t.jsx("a",{className:"footer-link",href:"https://developers.reddit.com",target:"_blank",rel:"noopener noreferrer",children:"Devvit Docs"}),t.jsx("span",{style:{color:"var(--text-tertiary)"},children:"¬∑"}),t.jsx("a",{className:"footer-link",href:"https://gamemaker.io",target:"_blank",rel:"noopener noreferrer",children:"GameMaker"}),t.jsx("span",{style:{color:"var(--text-tertiary)"},children:"¬∑"}),t.jsx("a",{className:"footer-link",href:"https://redditdailygames2026.devpost.com",target:"_blank",rel:"noopener noreferrer",children:"Hackathon"})]})]}),f&&e&&t.jsx(ee,{gameState:e,onClose:()=>m(!1),onShare:M})]})}X.createRoot(document.getElementById("root")).render(t.jsx(K.StrictMode,{children:t.jsx(Ce,{})}));
